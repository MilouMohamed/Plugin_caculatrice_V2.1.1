$.fn.calculator=function(options){const version="1.1.0";var settings=$.extend({resize:!0,draggable:!0,language:"en",timeout:null,copy:function(){},texts:{errorText:"error",copy:"copy"},precision:0,x:"2px",y:"2px"},options);if("show"==options)return $(".calculator_container").show(),this;if("hide"==options)return $(".calculator_container").hide(),this;if("remove"==options)return $(".calculator_container").remove(),this;if("version"==options)return version;function Insere_dans_DOM(){var timeoutId_2;function css_calculat(t){$("#calculator_ID"+t).css("display","none").css("z-index","1000").css("backgroundColor","#ffff").css("border"," #000 solid 2px").css("border-radius"," 5px").css("boxShadow","0px 0px 3px rgb(0, 0, 0)").css("padding","5px").css("min-width","180px").css("min-height","235px").css("max-height","235px").css("width","180px").css("height","235px"),$(".calc_cls_btn_fermer").css("position","absolute").css("font-size","19px").css("top","-11px").css("right","-1px").css("padding","0px").css("margin","0px").css("cursor","pointer"),$(".caclculator_btn").css("height","26px").css("padding"," 0px 7px 0px 7px"),$(".calcula_div_btn").css("padding"," 0px 7px 0px 7px"),/^((?!chrome|android).)*safari/i.test(navigator.userAgent)&&($(".calcul_row").css("textAlign","center  !important"),$(".caclculator_btn").css("textAlign","center   !important").css("padding","5px  !important").css("margin","auto 4px !important").css("height","28px  !important").css("width","70px !important"))}function insert(t,a){"="===t||"/100"===t&&!$.isNumeric($(".myChampsCalc"+a).val())||$(".myChampsCalc"+a).val(regex_calcu($(".myChampsCalc"+a).val()+t).trim())}function total($indic_cal){$msg_err=settings.texts?settings.texts.errorText:$.calculator.regional[settings.language]?$.calculator.regional[settings.language].errorText:settings.texts.errorText;try{if($resultat=eval($(".myChampsCalc"+$indic_cal).val())+"".trim(),$.isNumeric($resultat)){if(settings.precision>=0)for(var i=0;i<$resultat.length;i++)if("."===$resultat[i]){$resultat=$resultat.substring(0,i+(0==settings.precision?0:settings.precision+1));break}$(".myChampsCalc"+$indic_cal).val($resultat)}else $(".myChampsCalc"+$indic_cal).val($msg_err)}catch(t){$(".myChampsCalc"+$indic_cal).val($msg_err)}}function clear(t){$(".myChampsCalc"+t).val("")}function key_tap_val(t,a){for(var c in ($id_cal_id="#calculator_ID"+t,$key_=convert_code_en_lettre(a),$('button[data-id="'+t+'"]'))){const t=$(c);t.css("boxShadow",""),t.text().trim()===$key_&&(t.css("boxShadow","0px 0px 0px 3px #86929d"),setTimeout((function(){t.css("boxShadow","")}),800))}}function convert_code_en_lettre(t){return t>=96&&t<=105?t-96+"":(110==t?t=".":109==t?t="-":106==t?t="*":107==t?t="+":111==t?t="/":165==t?t="%":32==t||67==t?t="C":13!=t&&61!=t||(t="="),t)}function regex_calcu(t){return t=(t=(t=(t=(t=(t=(t=t.replace(/[^0-9\-\/\+\*\.]+/g,"")).replace(/(\.{2,}|\.\*|\.\+|\.\-|\.\/)/g,".")).replace(/(\*{2,}|\*\.|\*\+|\*\/)/g,"*")).replace(/(\+{2,}|\+\.|\+\*|\+\/)/g,"+")).replace(/(\-{2,}|\-\.|\-\*|\-\/)/g,"-")).replace(/(\/{2,}|\/\.|\/\*|\/\+)/g,"/")).replace(/(^[/.*+]|\-\+|\.[0-9]{1,}\.)/g,"")}function plusMoins(t){for(var a=$(".myChampsCalc"+t).val(),c=!0,l=new Array("*","+","-","/"),n=a.split(""),s=n.length;s>=0;s--)-1!==jQuery.inArray(n[s],l)&&("-"==n[s]?(n[s]="+",s=-1,c=!1):"+"==n[s]?(n[s]="-",s=-1,c=!1):"*"!=n[s]&&"/"!=n[s]||(n.splice(s+1,0,"-"),s=-1,c=!1));return 0==c?n.join(""):(n[0]+""=="-"?n.splice(0,0,"+"):"+"!==n[0]&&-1!=jQuery.inArray(n[0],l)||n.splice(0,0,"-"),n=n.join(""))}return calculator_instance=$(".glbl_cnt").length+1,$("body").append('<div   class="glbl_cnt calculator_container"  id="calculator_ID'+calculator_instance+'"    style="position:absolute; top:'+settings.x+"; left:"+settings.y+'" data-id="'+calculator_instance+'" >  <span    data-id="'+calculator_instance+'" class="calc_cls_btn_fermer">   &times; </span> <div > <div   id="id_msg_copy'+calculator_instance+'" style=" position: absolute;"  class="   hide" >mon msg iciCopy</div>  <input   type="text" class="form-control mb-2 calclator_Champ_Copy myChampsCalc'+calculator_instance+'" data-id="'+calculator_instance+'"    >   <div class="calcula_div_btn"> <div class="row calcul_row justify-content-around mb-2">   <button class="col-5 col-5_calcu caclculator_btn btn btn-dark  val" data-id="'+calculator_instance+'" value="C">C</button>   <button class="col-2 caclculator_btn btn btn-dark val" data-id="'+calculator_instance+'" value="/">/</button>   <button class="col-2 caclculator_btn btn btn-dark vall    pourcentage"    data-id="'+calculator_instance+'"  value="/100">%</button>  </div>  <div class="row calcul_row justify-content-around mb-2">   <button class="col-2 caclculator_btn btn btn-dark val"  data-id="'+calculator_instance+'" value="7">7</button>   <button class="col-2 caclculator_btn btn btn-dark val" data-id="'+calculator_instance+'" value="8">8</button>   <button class="col-2 caclculator_btn btn btn-dark val" data-id="'+calculator_instance+'" value="9">9</button>  <button class="col-2 caclculator_btn btn btn-dark val" data-id="'+calculator_instance+'" value="*">*</button>   </div>   <div class="row calcul_row justify-content-around mb-2">  <button class="col-2 caclculator_btn btn btn-dark val" data-id="'+calculator_instance+'" value="4">4</button>  <button class="col-2 caclculator_btn btn btn-dark val" data-id="'+calculator_instance+'" value="5">5</button> <button class="col-2 caclculator_btn btn btn-dark val" data-id="'+calculator_instance+'" value="6">6</button>  <button class="col-2 caclculator_btn btn btn-dark val" data-id="'+calculator_instance+'" value="-">-</button>  </div>  <div class="row calcul_row justify-content-around mb-2">   <button class="col-2 caclculator_btn btn btn-dark val" data-id="'+calculator_instance+'" value="1">1</button>   <button class="col-2 caclculator_btn btn btn-dark val" data-id="'+calculator_instance+'" value="2">2</button>   <button class="col-2 caclculator_btn btn btn-dark val" data-id="'+calculator_instance+'" value="3">3</button>   <button class="col-2 caclculator_btn btn btn-dark val" data-id="'+calculator_instance+'" value="+">+</button>  </div>    <div class="row calcul_row justify-content-around mb-2">  <button class="col-2 caclculator_btn  btn btn-dark val" data-id="'+calculator_instance+'" value="-/+">Â±</button>  <button class="col-2 caclculator_btn  btn btn-dark val" data-id="'+calculator_instance+'" value="0">0</button>  <button class="col-2 caclculator_btn  btn btn-dark val" data-id="'+calculator_instance+'" value=".">.</button>  <button class="col-2 caclculator_btn  btn btn-dark val  totaux"   data-id="'+calculator_instance+'" value="=">=</button>  </div> </div> </div></div> </div><style>  .hide{  display:none;  } .show{display: block;  }</style> '),css_calculat(calculator_instance),$(".glbl_cnt[data-id="+calculator_instance+"]").mouseenter((function(){settings.timeout&&clearTimeout(timeoutId_2)})).mouseleave((function(){settings.timeout&&($id_calc=$(this).attr("id"),timeoutId_2=setTimeout((function(){$("#"+$id_calc).hide()}),1e3*settings.timeout))})),settings.timeout&&(timeoutId_2=setTimeout((function(){$("#calculator_ID"+calculator_instance).hide()}),1e3*settings.timeout)),settings.resize&&$(".calculator_container").resizable({ghost:!0}),settings.draggable&&($(".calculator_container").draggable(),$(".calculator_container").css("cursor","move")),$("input.calclator_Champ_Copy[data-id="+calculator_instance+"]").dblclick((function(){var t=$(this).attr("data-id"),a=$("#_hiddenClipboard_");a.length||($("body").append('<textarea readonly style="position:absolute;top: -9999px;" id="_hiddenClipboard_"></textarea>'),a=$("#_hiddenClipboard_")),a.html($("input.myChampsCalc"+t).val()),a.select(),document.execCommand("copy"),document.getSelection().removeAllRanges(),a.remove(),$.isFunction(settings.copy)&&settings.copy.call($("#id_msg_copy"+t)),$msg_copy=settings.texts?settings.texts.copy:$.calculator.regional[settings.language]?$.calculator.regional[settings.language].copy:settings.texts.copy,$("#id_msg_copy"+t).text($msg_copy)})),$(".val[data-id="+calculator_instance+"]").click((function(t){var a=$(this).val(),c=$(this).attr("data-id");$btn_cal=$(this),$(this).css("boxShadow","0px 0px 0px 3px #86929d"),setTimeout((function(){$btn_cal.css("boxShadow","none")}),400),"-/+"===$(this).val()?$(".myChampsCalc"+c).val(plusMoins(c)):insert(a,c),"C"===$(this).val()&&clear(c)})),$(".totaux[data-id="+calculator_instance+"]").click((function(){total($(this).attr("data-id"))})),$(".pourcentage[data-id="+calculator_instance+"]").click((function(){$var_indic=$(this).attr("data-id"),setTimeout((function(){$(this).css("Color","red")}),800),key_tap_val($var_indic,165),$btn_cal=$(this),setTimeout((function(){$btn_cal.css("boxShadow","none")}),800),$.isNumeric($(".myChampsCalc"+$var_indic).val())&&(insert("/100",$var_indic),total($var_indic))})),$(".calc_cls_btn_fermer[data-id="+calculator_instance+"]").click((function(){$("#calculator_ID"+$(this).attr("data-id")).hide()})),$("input.calclator_Champ_Copy[data-id="+calculator_instance+"]").keyup((function(t){if($value=jQuery(this).val().trim(),$msg_err=settings.texts?settings.texts.errorText:$.calculator.regional[settings.language]?$.calculator.regional[settings.language].errorText:settings.texts.errorText,$value!==$msg_err&&jQuery(this).val(regex_calcu($value)),$id_cal=$(this).attr("data-id"),key_tap_val($id_cal,t.keyCode),165==t.keyCode&&""===$(".myChampsCalc"+$id_cal).val())return this;32==t.keyCode||67==t.keyCode?clear($id_cal):13==t.keyCode||61==t.keyCode||13==t.keyCode?total($id_cal):165==t.keyCode&&(insert("/100",$id_cal),total($id_cal))})),this}return Insere_dans_DOM(),this};